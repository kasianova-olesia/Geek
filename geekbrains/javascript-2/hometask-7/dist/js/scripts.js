function Container(){this.id="",this.className="",this.htmlCode=""}function Form(e,t,n,o,a,r,m,l){Container.call(this),this.id=e,this.className=t,this.name=n,this.birthday=o,this.phone=a,this.email=r,this.text=m,this.town=l}var nameElement=document.getElementById("form__name"),birthdayElement=document.getElementById("form__birthday"),phoneElement=document.getElementById("form__phone"),emailElement=document.getElementById("form__email"),textElement=document.getElementById("form__text"),townElement=document.getElementById("form__town"),check=!1;Container.prototype.render=function(){return this.htmlCode},Form.prototype=Object.create(Container.prototype),Form.prototype.constructor=Form,Form.prototype.fill=function(){nameElement.value=this.name,birthdayElement.value=this.birthday,phoneElement.value=this.phone,emailElement.value=this.email,textElement.value=this.text,townElement.value=this.town},Form.prototype.validate=function(e,t){for(var n in t){var o=t[n],a="form__"+o,r=document.getElementById(a),m=document.getElementById("form__message-"+o),l=/./;switch(o){case"name":l=/^([A-zА-я]+){2}$/;break;case"birthday":l=/^[0-9]{2}\.[0-9]{2}\.[0-9]{4}$/;break;case"phone":l=/^\+[7|8]{1}\([0-9]{3}\)[0-9]{3}-[0-9]{4}$/;break;case"email":l=/^([A-zА-я0-9_-]+\.)*[A-zА-я0-9_-]+@[A-zА-я0-9_-]+(\.[A-zА-я0-9_-]+)*\.[A-zА-я]{2,6}$/;break;case"town":l=/^([A-zА-я-\s]+){2}$/;break;case"text":l=/.{10}/}-1==r.value.search(l)?(check=!1,r.style.borderColor="#c750ac",$("#"+r.id).effect("bounce",{times:3},"slow"),m.innerHTML="Проверьте правильность заполнения поля!",$("#"+m.id).effect("bounce",{times:3},"slow")):(r.style.borderColor="#85c799",m.innerHTML="")}},document.getElementById("form__button-load").onclick=function(){var e=new XMLHttpRequest;e.open("GET","./json/data.json",!0),e.send(),e.onreadystatechange=function(){if(4==e.readyState)if(200!=e.status)console.log("Error",e.status,e.statusText);else{var t=JSON.parse(e.responseText);new Form("formId","formClass",t.name,t.birthday,t.phone,t.email,t.text,t.town).fill()}}},document.getElementById("form").onsubmit=function(e){check=!0,new Form("formId","formClass",nameElement.value,birthdayElement.value,phoneElement.value,emailElement.value,textElement.value,townElement.value).validate("form__input",["name","birthday","phone","email","text","town"]),check?alert("Форма успешно отправлена!"):e.preventDefault()},window.onload=function(){var e=new XMLHttpRequest;e.open("GET","./json/towns.json",!0),e.send(),e.onreadystatechange=function(){if(4==e.readyState)if(200!=e.status)console.log("Console: Error",e.status,e.statusText);else{var t=JSON.parse(e.responseText);$("#form__town").autocomplete({source:t.town,minLength:3})}},$.datepicker.setDefaults($.datepicker.regional.ru),$("#form__birthday").datepicker({dateFormat:"dd.mm.yy",dayNamesMin:["ВС","ПН","ВТ","СР","ЧТ","ПТ","СБ"],monthNames:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],yearRange:"1900:2017",changeYear:!0,firstDay:1}),$("#form__birthday").mask("99.99.9999",{placeholder:"дд.мм.гггг"}),$("#form__phone").mask("+7(999)999-9999",{placeholder:"+7(XXX)XXX-XXXX"})};