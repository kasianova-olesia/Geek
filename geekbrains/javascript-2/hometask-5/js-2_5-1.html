<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="robots" content="noindex, nofollow">
    <meta name="author" content="Alexander Shatalov">
    <title>Alexander Shatalov > JavaScript 2 > Lesson 5 > Exercise 1</title>
    <script src="http://code.jquery.com/jquery-1.12.4.min.js" integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ=" crossorigin="anonymous"></script>
    <script src="js-2_5-1_container.js"></script>
    <script src="js-2_5-1_basket.js"></script>
    <script>
    $(document).ready(function() {
        // Создаем экземпляр класса
        var basket = new Basket();
        // Отрисовка корзины
        basket.render('#basket_wrapper');

        // Покупка по нажатию кнопки "Купить"
        $('.buyme').on('click', function() {
            // Функция parseInt() принимает строку в качестве аргумента и возвращает целое число в соответствии с указанным основанием системы счисления.
            // Получаем id элемента из "good_123", "good" отбрасываем
            var idProduct = parseInt($(this).attr('id').split('_')[1]);
            var quantity = 1;
            // Выхватываем стоимость товара
            var price = parseInt($(this).parent().find('.product-price').text());
            // Добавляем в корзину
            basket.add(idProduct, quantity, price);
        });

        // Удаление
        $('.delme').on('click', function() {
            var idProduct = parseInt($(this).attr('id').split('_')[1]);
            var quantity = 1;
            var price = parseInt($(this).parent().find('.product-price').text());
            basket.del(idProduct, quantity, price);
        });

    });
    </script>

    <style>
        #basket_wrapper, #basket_buttons, .good {
            text-align: center;
            width: 80%;
            margin: 0 auto;
        }
    </style>
</head>

<body>
    <div id="basket_wrapper"></div>
    <div class="good">
        <p>Товар №123</p>
        <p>Цена: <span class="product-price">150</span> руб.</p>
        <button class="buyme" id="good-add_123" data-product="123">Купить</button>
        <button class="delme" id="good-del_123" data-product="123">Удалить</button>
    </div>
</body>

</html>